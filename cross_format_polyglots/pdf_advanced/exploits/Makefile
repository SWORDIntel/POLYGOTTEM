CC = gcc
CFLAGS = -O2 -Wall -Wextra -std=c99
TARGET = pdf_cve_patterns

all: $(TARGET)

$(TARGET): pdf_cve_patterns.c
	$(CC) $(CFLAGS) -o $(TARGET) pdf_cve_patterns.c

test: $(TARGET)
	@echo "[*] Generating CVE demonstration PDFs..."
	@./$(TARGET) --cve CVE-2009-0927 --output cve_2009_0927.pdf
	@./$(TARGET) --cve CVE-2010-0188 --output cve_2010_0188.pdf
	@./$(TARGET) --cve CVE-2011-0611 --output cve_2011_0611.pdf
	@./$(TARGET) --cve CVE-2013-2729 --output cve_2013_2729.pdf
	@./$(TARGET) --cve CVE-2014-0521 --output cve_2014_0521.pdf
	@./$(TARGET) --cve CVE-2016-4191 --output cve_2016_4191.pdf
	@./$(TARGET) --cve CVE-2017-3014 --output cve_2017_3014.pdf
	@echo "[+] Generated 7 CVE demonstration PDFs"
	@ls -lh cve_*.pdf

clean:
	rm -f $(TARGET) *.o cve_*.pdf

.PHONY: all test clean
